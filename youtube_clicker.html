<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>YouTube & Twitch Clicker Game</title>
  <link rel="icon" href="https://www.youtube.com/s/desktop/aea0e4b9/img/favicon.ico">
  <style>
    body {
      background: linear-gradient(135deg, #24243e 0%, #302b63 50%, #0f0c29 100%);
      color: #fff; font-family: 'Segoe UI',Arial,sans-serif; margin:0; padding:0;
      min-height:100vh; display:flex; flex-direction:column; align-items:center;
    }
    h1, h2, h3 {margin:0.5em 0;}
    .main {flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;}
    .button, .yt-btn, .tw-btn {
      display: flex; align-items: center; justify-content: center;
      background: linear-gradient(90deg, #ff0000 60%, #ff8e00 100%);
      color: #fff; border: none; border-radius: 50%; font-size: 2.2em; width: 130px; height: 130px;
      margin: 1em auto; font-weight: bold; box-shadow:0 5px 25px #0008; transition: transform 0.1s;
      cursor: pointer; outline: none; position:relative; overflow: hidden;
    }
    .tw-btn {background: linear-gradient(90deg,#9147ff 60%,#6441a5 100%);}
    .yt-btn img, .tw-btn img {
      border-radius:50%; width:90px; height:90px; object-fit: cover; pointer-events: none;
    }
    .yt-btn:active, .tw-btn:active, .button:active {transform:scale(0.97);}
    .button {border-radius: 18px;width:auto;height:auto; font-size:1.1em;padding:13px 24px;background:#222;box-shadow:0 2px 8px #0004;}
    .menu-bar {display:flex; gap:5px; margin:20px 0;}
    .menu-bar button {background:#fff2; color:#fff; border:none; padding:10px 22px; border-radius:13px; font-size:1em; cursor:pointer;}
    .menu-bar .active {background:#fff2,linear-gradient(90deg,#ff5f6d,#ffc371); color:#ff5f6d; font-weight:bold;}
    .section {display:none;}
    .section.active {display:block; animation: fadeIn 0.4s;}
    .stats {margin:1em 0; display:flex;gap:1.6em; font-size:1.15em; justify-content:center;}
    .stat-label {font-weight:bold;}
    .shop {background:#fff1; border-radius:13px; padding:1em;margin:1em 0;max-width:420px;}
    .shop-item {display:flex;align-items:center;justify-content:space-between; margin:8px 0;}
    .shop-btn {background:#ff5f6d; color:#fff; border:none; border-radius:12px; padding:8px 18px;font-size:1em;cursor:pointer;}
    .shop-btn:disabled {background:#8884; cursor:not-allowed;}
    .video-list {max-height:160px; overflow:auto; background:#fff1; border-radius:9px; padding:7px 13px;}
    .profile-img-preview {width:60px;height:60px;border-radius:50%;object-fit:cover;border:2px solid #fff;margin:0 0.5em;}
    .input-row {margin-bottom:10px;display:flex;align-items:center;gap:10px;}
    .input-row input[type="text"] {padding:7px 10px; border-radius:7px; border:none; width:170px;}
    input[type="file"] {display:none;}
    .upload-btn {background:#444; color:#fff; border-radius:8px; padding:5px 12px; cursor:pointer;}
    .code-box {background:#222a; border-radius:8px; padding:7px 14px; font-family:monospace; font-size:1.1em;}
    .profile-box {background:#fff1; border-radius:14px; padding:1.3em; max-width:350px;}
    .boost {color:#ffeb3b; font-weight:bold; margin-left:10px; font-size:1.1em;}
    .play-btn {background:#ffd600; color:#000; border-radius:50%; width:55px; height:55px; display:inline-flex;align-items:center;justify-content:center; font-size:1.9em; margin:0 7px; box-shadow:0 2px 10px #0004;}
    .play-btn.locked{background:#666;color:#fff3;}
    @media (max-width:600px){
      .main {padding:0 0.5em;}
      .shop {max-width:98vw;}
      .profile-box {max-width:95vw;}
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(14px);}to{opacity:1;transform:translateY(0);}}
  </style>
</head>
<body>
  <div class="main">
    <h1>YouTube & Twitch Clicker</h1>
    <div class="menu-bar">
      <button id="menu-main" class="active">YouTube</button>
      <button id="menu-shop">Shop</button>
      <button id="menu-cut" style="display:none">Cut-Menü</button>
      <button id="menu-twitch" style="display:none">Twitch</button>
      <button id="menu-profile">Profil</button>
    </div>

    <!-- --- YOUTUBE MAIN --- -->
    <div class="section active" id="section-main">
      <div style="display:flex;flex-direction:column;align-items:center;">
        <button class="yt-btn" id="yt-btn" title="Clips sammeln">
          <img id="yt-profile-img" src="" alt="Profilbild">
        </button>
        <div style="text-align:center;">
          <div class="stat-label">Clips: <span id="clips">0</span></div>
          <button class="button" id="btn-cut" style="margin:8px 0;">Clips schneiden</button>
        </div>
        <div style="margin:18px 0 2px 0;">
          <span class="stat-label">Videos:</span>
          <span id="video-count">0</span> |
          <span class="stat-label">Abonnenten:</span>
          <span id="subs">0</span>
          <span id="boost-info"></span>
        </div>
        <div class="video-list" id="video-list"></div>
        <div style="margin-top:9px;">
          <span id="play-buttons"></span>
        </div>
      </div>
    </div>

    <!-- --- CUT MENU --- -->
    <div class="section" id="section-cut">
      <h2>Video schneiden</h2>
      <div>
        <label>Anzahl Clips zum Schneiden: </label>
        <input type="number" min="1" max="99999" value="10" id="cut-clips-input" style="width:65px;">
        <button class="button" id="btn-start-cut">Start</button>
      </div>
      <div id="cut-progress" style="margin:1em 0;display:none;">
        <span id="cut-status"></span>
        <div style="width:100%;background:#333;height:16px;border-radius:8px;overflow:hidden;margin-top:7px;">
          <div id="cut-bar" style="background:#ff5252;height:100%;width:0%;transition:width 0.3s;"></div>
        </div>
      </div>
      <div id="cut-finish" style="display:none;">
        <input type="text" id="video-title" maxlength="24" placeholder="Videotitel">
        <button class="button" id="btn-upload">Upload</button>
      </div>
    </div>

    <!-- --- SHOP --- -->
    <div class="section" id="section-shop">
      <h2>Shop</h2>
      <div class="shop" id="shop-list"></div>
    </div>

    <!-- --- TWITCH --- -->
    <div class="section" id="section-twitch">
      <h2>Twitch</h2>
      <div style="display:flex;flex-direction:column;align-items:center;">
        <button class="tw-btn" id="tw-btn" title="Twitch Stream starten">
          <img id="tw-profile-img" src="" alt="Twitch Profil">
        </button>
        <div style="text-align:center;">
          <div class="stat-label">Twitch-Klicks: <span id="tw-clips">0</span></div>
          <button class="button" id="btn-tw-cut">Twitch-Clips schneiden</button>
        </div>
      </div>
    </div>

    <!-- --- PROFIL --- -->
    <div class="section" id="section-profile">
      <h2>Profil</h2>
      <div class="profile-box">
        <form id="profile-form">
          <div class="input-row">
            <label>Kanalname:</label>
            <input type="text" id="profile-name" maxlength="18" required>
          </div>
          <div class="input-row">
            <label>Bild:</label>
            <label class="upload-btn" for="profile-pic">Hochladen</label>
            <input type="file" accept="image/*" id="profile-pic">
            <img id="profile-img-preview" class="profile-img-preview" src="" alt="Profil" style="display:none;">
          </div>
          <div class="input-row">
            <label>Twitch-Name:</label>
            <input type="text" id="tw-name" maxlength="18">
          </div>
          <div class="input-row">
            <label>Twitch Bild:</label>
            <label class="upload-btn" for="tw-pic">Hochladen</label>
            <input type="file" accept="image/*" id="tw-pic">
            <img id="tw-img-preview" class="profile-img-preview" src="" alt="Twitch Profil" style="display:none;">
          </div>
          <button class="button" type="submit" style="margin:9px 0 0 0;">Speichern</button>
        </form>
        <div style="margin-top:13px;">
          <div><b>Dein Code:</b> <span class="code-box" id="profile-code"></span></div>
          <div>
            <input type="text" id="import-code" placeholder="Account-Code eingeben" style="margin:8px 0; width:140px;">
            <button class="button" id="btn-import">Importieren</button>
          </div>
        </div>
      </div>
    </div>
  </div>
<script>
/* --- GAME STATE --- */
const defaultState = () => ({
  name: 'Mein Kanal',
  profileImg: '',
  twName: '',
  twImg: '',
  code: genCode(),
  clips: 0, twClips: 0,
  videos: [],
  subs: 0,
  playButtons: [],
  upgrades: {cutter:0,clicker:0,streamer:0,manager:0},
  lastCut: 0,
  twUnlocked: false,
});
let state = null;
let cutInProgress = false, cutTimeout = null, autoSaveTmr = null;
const CUT_CLIPS_REQ = 10;
const PLAY_BTN_REQS = [1000, 10000, 100000, 1000000];
const PLAY_BTN_BOOST = 0.3; // +30%
/* --- STATE MGMT --- */
function genCode(){return Math.random().toString(36).substring(2,10)+Date.now().toString(36).slice(-5);}
function saveState(s=state){localStorage.setItem('ytclicker', JSON.stringify(s));}
function loadState(){let s=localStorage.getItem('ytclicker');return s?JSON.parse(s):defaultState();}
function setState(s){state=s;saveState();}
function exportCode(){return btoa(unescape(encodeURIComponent(JSON.stringify(state))));}
function importCode(code){try{let s=JSON.parse(decodeURIComponent(escape(atob(code))));setState(s);updateAll();alert("Account geladen!");}catch{alert("Ungültiger Code!");}}
function resetCut(){cutInProgress=false;clearTimeout(cutTimeout);cutTimeout=null;document.getElementById('cut-progress').style.display='none';document.getElementById('cut-finish').style.display='none';}
function boostFactor(){return 1+state.playButtons.length*PLAY_BTN_BOOST;}
/* --- UI HELPERS --- */
function formatNum(x){return x>=1e6?(x/1e6).toFixed(2)+' Mio':x>=1e3?(x/1e3).toFixed(1)+'k':x;}
function createProfilePreview(img,el){el.src=img;el.style.display=img?'':'none';}
function showMenu(menu){document.querySelectorAll('.menu-bar button').forEach(b=>b.classList.remove('active'));document.getElementById('menu-'+menu).classList.add('active');document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));document.getElementById('section-'+menu).classList.add('active');if(menu==='cut'){resetCut();}}
/* --- MAIN GAME --- */
function updateAll(){
  document.getElementById('clips').textContent = formatNum(state.clips);
  document.getElementById('video-count').textContent = state.videos.length;
  document.getElementById('subs').textContent = formatNum(state.subs);
  // Shop
  updateShop();
  // Profilbild
  document.getElementById('yt-profile-img').src = state.profileImg||'https://upload.wikimedia.org/wikipedia/commons/9/9a/Gull_portrait_ca_usa.jpg';
  // Videos auflisten
  let vlist = state.videos.map(v=>`<div>🎬 <b>${v.title||'Video '+v.id}</b> <span style="color:#fff7;">(${formatNum(v.clips)} Clips, +${formatNum(v.subs)} Subs)</span></div>`).join('');
  document.getElementById('video-list').innerHTML = vlist||'<span style="color:#fff7;">Noch keine Videos.</span>';
  // Play Buttons
  let pb = PLAY_BTN_REQS.map((r,i)=>
    `<span class="play-btn${state.playButtons.includes(r)?'':' locked'}" title="${state.playButtons.includes(r)?'Erhalten!':'Erreiche '+formatNum(r)+' Abos'}">${state.playButtons.includes(r)?'▶️':(i+1)}</span>`
  ).join('');
  document.getElementById('play-buttons').innerHTML = pb;
  // Boost Info
  document.getElementById('boost-info').innerHTML = state.playButtons.length?`<span class="boost">+${state.playButtons.length*30}%</span>`:'';
  // Twitch
  document.getElementById('tw-profile-img').src = state.twImg||'https://static-cdn.jtvnw.net/jtv_user_pictures/404_user_70x70.png';
  document.getElementById('tw-clips').textContent = formatNum(state.twClips||0);
  // Unlock Twitch?
  if(!state.twUnlocked && state.subs>=200){
    state.twUnlocked=true;saveState();
    document.getElementById('menu-twitch').style.display='';
    alert('Twitch wurde freigeschaltet!');
  }
  document.getElementById('menu-twitch').style.display=state.twUnlocked?'':'none';
  // Cut-Menü
  document.getElementById('menu-cut').style.display=state.clips>=CUT_CLIPS_REQ?'':'none';
  // Profil
  document.getElementById('profile-name').value=state.name;
  createProfilePreview(state.profileImg,document.getElementById('profile-img-preview'));
  document.getElementById('tw-name').value=state.twName||'';
  createProfilePreview(state.twImg,document.getElementById('tw-img-preview'));
  document.getElementById('profile-code').textContent=exportCode().slice(0,24)+'...';
  // Play Buttons erhalten?
  PLAY_BTN_REQS.forEach(r=>{if(state.subs>=r&&!state.playButtons.includes(r)){state.playButtons.push(r);saveState();updateAll();}});
}
function addClips(q=1){state.clips+=Math.round(q*boostFactor());saveState();updateAll();}
function addTWClips(q=1){state.twClips=(state.twClips||0)+Math.round(q*boostFactor());saveState();updateAll();}
function cutVideoStart(){let clips=parseInt(document.getElementById('cut-clips-input').value);if(isNaN(clips)||clips<1||clips>CUT_CLIPS_REQ*100){alert('Ungültige Clip-Anzahl!');return;}if(state.clips<clips){alert('Zu wenig Clips!');return;}resetCut();cutInProgress=true;document.getElementById('cut-progress').style.display='block';let duration=Math.max(2,clips/(5+state.upgrades.cutter*2)*((100-state.upgrades.manager*5)/100)/boostFactor());let bar=document.getElementById('cut-bar'),status=document.getElementById('cut-status');let t0=Date.now(),T=duration*1000;function updateBar(){let dt=Date.now()-t0;let p=Math.min(1,dt/T);bar.style.width=(p*100)+'%';status.textContent='Schneide Video... ('+Math.ceil((1-p)*duration)+'s)';if(p<1){cutTimeout=setTimeout(updateBar,120);}else{cutFinish(clips);}}updateBar();}
function cutFinish(clips){document.getElementById('cut-progress').style.display='none';document.getElementById('cut-finish').style.display='block';state.clips-=clips;state.lastCut=clips;saveState();}
function uploadVideo(){let title=document.getElementById('video-title').value.trim();if(!title){alert('Titel eingeben!');return;}let clips=state.lastCut||10,subs=Math.max(1,Math.round(clips*(3+Math.random()*3)*(1+(state.videos.length*0.2))));if(Math.random()<0.1&&state.videos.length>4)subs=Math.round(subs*0.75);state.videos.push({id:state.videos.length+1,title,clips,subs});state.subs+=subs;saveState();updateAll();document.getElementById('cut-finish').style.display='none';document.getElementById('video-title').value='';}
function twCut(){if((state.twClips||0)<CUT_CLIPS_REQ){alert("Zu wenig Twitch-Clips!");return;}let subs=Math.round(10+Math.random()*30+state.upgrades.streamer*10);state.subs+=subs;state.twClips-=CUT_CLIPS_REQ;saveState();updateAll();alert("Du hast "+subs+" Abonnenten durch Twitch gewonnen!");}
/* --- SHOP --- */
const SHOP = [
  {id:'cutter',name:'Cutter',desc:'Schneidet Videos automatisch.',base:150,exp:1.9,icon:'✂️'},
  {id:'clicker',name:'Klicker',desc:'Klickt für dich.',base:90,exp:1.8,icon:'🖱️'},
  {id:'streamer',name:'Streamer',desc:'Streamt automatisch (Twitch).',base:220,exp:2.0,icon:'📺'},
  {id:'manager',name:'Manager',desc:'+5% Speed für alle Upgrades.',base:350,exp:2.2,icon:'👔'}
];
function calcCost(type){let s=SHOP.find(x=>x.id===type);return Math.floor(s.base*Math.pow(s.exp,state.upgrades[type]));}
function buyUpgrade(type){let cost=calcCost(type);let u=state.upgrades; if(state.clips<cost){alert('Zu wenig Clips!');return;} u[type]++;state.clips-=cost;saveState();updateAll();}
function updateShop(){
  let html = SHOP.map(s=>
    `<div class="shop-item">
      <div>${s.icon} <b>${s.name}</b><br><span style="font-size:0.92em">${s.desc}</span><br>Level ${state.upgrades[s.id]}</div>
      <button class="shop-btn" onclick="buyUpgrade('${s.id}')" ${state.clips<calcCost(s.id)?'disabled':''}>Kaufen<br>(${formatNum(calcCost(s.id))} Clips)</button>
    </div>`
  ).join('');
  document.getElementById('shop-list').innerHTML=html;
}
/* --- AUTOS --- */
function autoTick(){
  // Klicker
  let k=state.upgrades.clicker; if(k)addClips(k*boostFactor());
  // Cutter
  let c=state.upgrades.cutter;
  if(c && !cutInProgress && state.clips>=CUT_CLIPS_REQ)cutVideoStart();
  // Streamer
  if(state.twUnlocked&&state.upgrades.streamer)addTWClips(state.upgrades.streamer*boostFactor());
  setTimeout(autoTick, 1600-Math.min(state.upgrades.manager*50,1300));
}
/* --- INIT --- */
function init(){
  state=loadState();updateAll();
  autoTick();
  // Menu
  document.getElementById('menu-main').onclick=()=>showMenu('main');
  document.getElementById('menu-shop').onclick=()=>showMenu('shop');
  document.getElementById('menu-cut').onclick=()=>{if(state.clips>=CUT_CLIPS_REQ)showMenu('cut');};
  document.getElementById('menu-twitch').onclick=()=>showMenu('twitch');
  document.getElementById('menu-profile').onclick=()=>showMenu('profile');
  // Buttons
  document.getElementById('yt-btn').onclick=()=>addClips(1);
  document.getElementById('btn-cut').onclick=()=>{
