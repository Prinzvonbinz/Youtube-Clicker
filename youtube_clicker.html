<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>YouTube Clicker</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:900,700,400&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;background: linear-gradient(120deg, #222 0%, #850101 100%);
      color:#fff;min-height:100vh;
    }
    .center { display:flex;justify-content:center;align-items:center;flex-direction:column;}
    .btn {
      background: linear-gradient(45deg, #ff0000 40%, #ffa000 100%);
      color:#fff;border:none;border-radius:50%;font-size:2.2rem;
      width:120px;height:120px;cursor:pointer;box-shadow:0 4px 16px #0007;
      transition: transform .1s, box-shadow .1s; margin: 20px auto;
      display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;
    }
    .btn:active { transform: scale(0.97);}
    .btn img { width:80px;height:80px;border-radius:50%; pointer-events:none; }
    header {display:flex;justify-content:space-between;padding:15px 30px 0 30px;align-items:center;}
    nav button {margin:0 5px;padding:8px 18px;border-radius:8px;background:#fff2;color:#fff;border:none;cursor:pointer;font-size:1rem;}
    nav button.active {background:#fff3;color:#b00;font-weight:bold;}
    .statbox{display:flex;justify-content:center;gap:24px;margin:16px 0;flex-wrap:wrap;}
    .stat{background:#fff1;color:#000b;padding:12px 22px;border-radius:14px;font-size:1.2rem;min-width:120px;text-align:center;}
    .shop,.profile,.videos,.cut,.twitch{display:none;}
    .visible{display:block!important;}
    .shop-upgrade,.cut-video,.video-entry{background:#fff2;padding:18px 16px;margin:12px 0;border-radius:12px;box-shadow:0 3px 8px #0003;}
    .shop-upgrade h3{margin:0 0 6px 0;}
    .shop-upgrade button{margin-top:7px;}
    input[type="text"],input[type="file"] {padding:6px 8px;border-radius:8px;border:none;margin:4px 0;}
    label{font-size:1rem;}
    .profile-img{width:72px;height:72px;border-radius:50%;margin:10px 0 5px 0;object-fit:cover;}
    .twitch-btn{background:linear-gradient(45deg,#9147ff 60%,#f0e 100%);}
    .twitch-btn img{border:3px solid #fff;}
    .play-btn{background:linear-gradient(90deg,#ffd700 60%,#fff 100%);color:#b18c00;box-shadow:0 0 24px #ffd70080;}
    .video-list{max-height:230px;overflow-y:auto;}
    .shop-upgrade .level{font-size:.9em;color:#222b;}
    .shop-upgrade .price{font-size:1.1em;color:#c00;font-weight:bold;}
    .cut-progress{height:12px;background:#333;border-radius:8px;overflow:hidden;margin:6px 0;}
    .cut-progress-inner{height:100%;background:#ffb000;}
    .entry{margin-bottom:8px;}
    .codebox{font-family:monospace;background:#fff3;color:#c00;padding:2px 8px;border-radius:8px;}
    .profile label{display:block;margin:8px 0 2px;}
    .profile input[type="text"]{width:90%;max-width:320px;}
    .shop-upgrade .desc{font-size:.95em;color:#555;}
    .shop-upgrade .bonus{color:#009e18;}
    .cut-video input{width:80%;border-radius:8px;border:none;padding:6px;}
    .cut-video button{margin-top:8px;}
    @media (max-width:700px){
      .btn{width:90px;height:90px;font-size:1.4rem;}
      .btn img{width:56px;height:56px;}
      .stat{padding:10px 6px;min-width:90px;}
      .profile-img{width:52px;height:52px;}
    }
    ::-webkit-scrollbar{width:0;}
    .fadein{animation:fadein .7s;}
    @keyframes fadein{from{opacity:.1;}to{opacity:1;}}
  </style>
</head>
<body>
  <header>
    <div style="font-size:1.5em;font-weight:900;letter-spacing:2px;color:#fff"><span style="color:#ff0000">YouTube</span> Clicker</div>
    <nav>
      <button onclick="showMenu('game')" id="navgame" class="active">Game</button>
      <button onclick="showMenu('cut')" id="navcut">Schneiden</button>
      <button onclick="showMenu('videos')" id="navvideos">Videos</button>
      <button onclick="showMenu('shop')" id="navshop">Shop</button>
      <button onclick="showMenu('profile')" id="navprofile">Profil</button>
      <button onclick="showMenu('twitch')" id="navtwitch" style="display:none">Twitch</button>
    </nav>
  </header>
  <div class="statbox">
    <div class="stat"><span id="subs">0</span> Abos</div>
    <div class="stat"><span id="clips">0</span> Clips</div>
    <div class="stat"><span id="videos">0</span> Videos</div>
    <div class="stat" id="playbtnstats" style="display:none"><span id="playbtns">0</span> Play-Buttons</div>
  </div>
  <div id="game" class="center visible fadein">
    <button class="btn" id="mainBtn" onclick="clickClip()" title="Clips machen">
      <img id="ytBtnImg" src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="Profilbild">
    </button>
    <div style="font-size:1.2em;margin:6px 0;">Klicke auf dein <span style="color:#ff0000">YouTube</span>-Button für Clips!</div>
    <div style="margin-top:12px;">
      <span style="font-size:.95em;color:#fff5;">Clips: </span>
      <span id="clips-per-click" style="color:#ffb000;font-weight:bold">1</span> pro Klick
    </div>
    <div style="margin-top:12px;" id="twitchUnlockMsg"></div>
  </div>
  <div id="cut" class="center cut">
    <!-- Cutting Menu -->
  </div>
  <div id="videos" class="center videos">
    <!-- Video List -->
  </div>
  <div id="shop" class="center shop">
    <!-- Shop -->
  </div>
  <div id="profile" class="center profile">
    <!-- Profile -->
  </div>
  <div id="twitch" class="center twitch">
    <!-- Twitch Menu -->
  </div>
<script>
/* --- Default Images --- */
const ytLogo = "https://upload.wikimedia.org/wikipedia/commons/9/98/YouTube_Logo_%282013-2017%29.png";
const twLogo = "https://upload.wikimedia.org/wikipedia/commons/9/96/Twitch_logo_2019.svg";

/* --- Data Model --- */
let data = {
  code: genCode(),
  ytName: '',
  ytImg: ytLogo,
  twName: '',
  twImg: twLogo,
  subs: 0,
  clips: 0,
  videos: [],
  playBtns: 0,
  upgrades: {
    cutter: { level:0, base:1, speed: 0.18 }, // in cuts/sec
    clicker: { level:0, base:1 },
    streamer: { level:0, base:1 },
    manager: { level:0, base:1, bonus:0.05 }
  },
  cutQueue: [],
  twitch: { unlocked: false, streams:0, twClips:0, twSubs:0 },
  device: (/Android|iPhone|iPad|iPod|Windows Phone/i.test(navigator.userAgent))?"mobile":"pc"
};

/* --- Save/Load --- */
function save(){ localStorage.setItem('ytclicker_'+data.code, JSON.stringify(data)); localStorage.setItem('ytclicker_last', data.code);}
function load(code){
  let d = localStorage.getItem('ytclicker_'+code);
  if(d){ data = JSON.parse(d); updateAll(); showMenu('game');info("Profil geladen!");}
  else info("Kein Account mit diesem Code gefunden!","warn");
}
function genCode(){
  return Math.random().toString(36).substr(2,8).toUpperCase();
}

/* --- UI Navigation --- */
function showMenu(menu){
  ["game","cut","videos","shop","profile","twitch"].forEach(m=>{
    document.getElementById(m).classList.remove('visible');
    document.getElementById('nav'+m)?.classList.remove('active');
  });
  document.getElementById(menu).classList.add('visible');
  document.getElementById('nav'+menu)?.classList.add('active');
  if(menu==='cut') renderCut();
  if(menu==='videos') renderVideos();
  if(menu==='shop') renderShop();
  if(menu==='profile') renderProfile();
  if(menu==='twitch') renderTwitch();
}
function info(msg,type){ 
  let d = document.createElement('div');
  d.textContent=msg; d.style='position:fixed;top:10px;left:50%;transform:translateX(-50%);background:#111c;color:#fff;padding:10px 22px;border-radius:10px;z-index:99;font-size:1.1em;box-shadow:0 2px 10px #0006;'+(type=="warn"?"background:#a022":"background:#222c");
  document.body.appendChild(d); setTimeout(()=>d.remove(),1500);
}

/* --- Game Actions --- */
function clipsPerClick(){
  let base=1+data.upgrades.clicker.level*data.upgrades.clicker.base;
  let boost=1+data.upgrades.manager.level*data.upgrades.manager.bonus;
  let play=data.playBtns?1.3**data.playBtns:1;
  return Math.floor(base*boost*play);
}
function clickClip(){
  data.clips+=clipsPerClick();
  save(); updateStats();
}
function twitchPerClick(){
  let base=1+data.upgrades.streamer.level*data.upgrades.streamer.base;
  let boost=1+data.upgrades.manager.level*data.upgrades.manager.bonus;
  let play=data.playBtns?1.3**data.playBtns:1;
  return Math.floor(base*boost*play);
}
function clickTwitch(){
  data.twitch.twClips+=twitchPerClick();
  save(); updateTwitch();
}

/* --- Cut Video --- */
let cutting = false, cutProgress=0, cutTitle='';
function renderCut(){
  let c = document.getElementById('cut');
  if(cutting){
    let dur = getCutDuration();
    c.innerHTML = `<div class="cut-video">
      <div>Schneide Video: <b>${cutTitle||'Ohne Titel'}</b></div>
      <div class="cut-progress"><div class="cut-progress-inner" style="width:${Math.min(100,cutProgress*100/dur)}%"></div></div>
      <div>${Math.max(0,(dur-cutProgress)).toFixed(1)} Sek. übrig...</div>
    </div>`;
    return;
  }
  let minClips=10;
  let opts = [10,25,50,100].filter(x=>data.clips>=x);
  if(opts.length==0) c.innerHTML=`<div>Du brauchst mindestens 10 Clips.<br><br><button onclick="showMenu('game')">Zurück</button></div>`;
  else c.innerHTML = `<div class="cut-video">
    <label>Wie viele Clips willst du schneiden?</label>
    <select id="cutNum">${opts.map(x=>`<option value="${x}">${x} Clips</option>`).join('')}</select>
    <label>Titel:</label>
    <input type="text" id="cutTitle" maxlength="30" placeholder="Video-Titel">
    <button onclick="startCut()">Schneiden</button>
  </div>`;
}
function getCutDuration(num){
  num=num||parseInt(document.getElementById('cutNum')?.value||10);
  let base=6; // sec per 10 clips
  let speed= data.upgrades.cutter.speed + data.upgrades.cutter.level*0.13;
  let play = data.playBtns?1.3**data.playBtns:1;
  let manager = 1+data.upgrades.manager.level*data.upgrades.manager.bonus;
  let d = Math.max(2, base*(num/10)/(speed*manager*play));
  return d;
}
function startCut(){
  let num=parseInt(document.getElementById('cutNum').value);
  let title=document.getElementById('cutTitle').value||("Video "+(data.videos.length+1));
  if(data.clips<num){info("Nicht genug Clips!","warn");return;}
  data.clips-=num; cutting=true; cutProgress=0; cutTitle=title;
  renderCut(); save();
}
function cutTick(){
  if(!cutting) return;
  let dur=getCutDuration();
  cutProgress+=0.2;
  renderCut();
  if(cutProgress>=dur){
    cutting=false;
    let v = {title:cutTitle,date:Date.now(),clips:parseInt(document.getElementById('cutNum')?.value||10),views:0,likes:0,subs:0,loss:0};
    data.videos.push(v); 
    let news = Math.floor(v.clips*Math.random()*6+20);
    let loss = Math.random()<0.06?Math.floor(news*0.5):0;
    v.subs=news; v.loss=loss; data.subs+=news-loss;
    if(data.subs<0) data.subs=0;
    info(`Video "${v.title}" hochgeladen! +${news}${loss?' / -'+loss:''} Abos`);
    save(); updateAll(); renderVideos();
    if(data.subs>=10000 && !data.twitch.unlocked) unlockTwitch();
  }
}

/* --- Shop --- */
const shopItems = [
  {key:'cutter', title:'Cutter', desc:'Schneidet Videos automatisch.', icon:'✂️'},
  {key:'clicker', title:'Klicker', desc:'Klickt automatisch für Clips.', icon:'🖱️'},
  {key:'streamer', title:'Streamer', desc:'Klickt automatisch für Twitch.', icon:'🎥'},
  {key:'manager', title:'Manager', desc:'Alle +5% schneller pro Stufe.', icon:'👔'}
];
function getPrice(key){
  let lvl=data.upgrades[key].level;
  let base= [80, 110, 170, 400][shopItems.findIndex(x=>x.key==key)];
  return Math.floor(base*Math.pow(2.22,lvl));
}
function renderShop(){
  let c = document.getElementById('shop');
  c.innerHTML = shopItems.map(({key,title,desc,icon})=>{
    let lvl = data.upgrades[key].level;
    let price = getPrice(key);
    let bonus = (key=="manager" && lvl>0)?`<span class="bonus">Bonus: +${(lvl*5).toFixed(0)}%</span>`:'';
    let upBtn = `<button onclick="buyUp('${key}')" ${data.clips<price?'disabled':''}>Upgrade für <span class="price">${price} Clips</span></button>`;
    return `<div class="shop-upgrade">
      <h3>${icon} ${title} <span class="level">Lvl ${lvl}</span></h3>
      <div class="desc">${desc} ${bonus}</div>
      ${upBtn}
    </div>`;
  }).join('');
}

/* --- Shop Upgrades --- */
function buyUp(key){
  let price=getPrice(key);
  if(data.clips<price){info("Nicht genug Clips!","warn");return;}
  data.clips-=price;
  data.upgrades[key].level++;
  if(key=="cutter"){} // speed up, handled in getCutDuration
  if(key=="manager"){}
  save(); renderShop(); updateStats(); info("Upgrade gekauft!");
}

/* --- Videos --- */
function renderVideos(){
  let c = document.getElementById('videos');
  if(data.videos.length==0){ c.innerHTML='<div>Du hast noch keine Videos.<br>Schneide und lade eins hoch!</div>'; return;}
  c.innerHTML = `<div class="video-list">
    ${data.videos.slice().reverse().map(v=>`<div class="video-entry">
      <b>${v.title}</b><br>
      <span style="font-size:.95em;color:#777;">${new Date(v.date).toLocaleString()}</span><br>
      Clips: ${v.clips} | <span style="color:#0a0;">+${v.subs}</span>${v.loss?`<span style="color:#c00;"> / -${v.loss}</span>`:''}
    </div>`).join('')}
  </div>`;
}

/* --- Profile --- */
function renderProfile(){
  let c = document.getElementById('profile');
  c.innerHTML = `
    <img class="profile-img" src="${data.ytImg}" id="ytProfImg">
    <div><b>${escapeHTML(data.ytName||'Kein Kanalname')}</b></div>
    <label>Kanalname ändern</label>
    <input type="text" id="ytName" value="${escapeHTML(data.ytName)}" maxlength="20">
    <label>Profilbild ändern</label>
    <input type="file" id="ytImgInput" accept="image/*">
    <hr style="width:80%;opacity:.3;">
    <label>Account Code</label>
    <div class="codebox">${data.code}</div>
    <button onclick="copyCode()">Kopieren</button>
    <hr style="width:80%;opacity:.3;">
    <label>Account importieren</label>
    <input type="text" id="importcode" maxlength="16" placeholder="Code eingeben...">
    <button onclick="importCode()">Laden</button>
    <hr style="width:80%;opacity:.3;">
    <label>Twitch-Kanalname</label>
    <input type="text" id="twName" value="${escapeHTML(data.twName)}" maxlength="20">
    <label>Twitch-Profilbild</label>
    <input type="file" id="twImgInput" accept="image/*">
  `;
  document.getElementById('ytName').oninput = e=>{data.ytName=e.target.value;save();updateBtnImgs();};
  document.getElementById('ytImgInput').onchange = e=>{imgInput(e,'yt');};
  document.getElementById('twName').oninput = e=>{data.twName=e.target.value;save();};
  document.getElementById('twImgInput').onchange = e=>{imgInput(e,'tw');};
}
function imgInput(e,which){
  let file = e.target.files[0];
  if(!file) return;
  let r = new FileReader();
  r.onload = function(ev){
    if(which==='yt'){data.ytImg=ev.target.result;}
    else{data.twImg=ev.target.result;}
    save(); renderProfile(); updateBtnImgs();
  };
  r.readAsDataURL(file);
}
function copyCode(){
  navigator.clipboard.writeText(data.code);
  info("Code kopiert!");
}
function importCode(){
  let code = document.getElementById('importcode').value.trim();
  if(code.length<5){info("Ungültiger Code!","warn");return;}
  load(code);
}

/* --- Twitch --- */
function unlockTwitch(){
  data.twitch.unlocked=true; save();
  document.getElementById('navtwitch').style.display='';
  info("Twitch-Menü freigeschaltet!");
}
function renderTwitch(){
  let c = document.getElementById('twitch');
  c.innerHTML=`
    <button class="btn twitch-btn" onclick="clickTwitch()" title="Twitch Stream starten">
      <img src="${data.twImg||twLogo}" alt="Profilbild">
    </button>
    <div style="font-size:1.1em;margin:5px 0;">Klicke auf den Twitch-Button für Streams!</div>
    <div style="margin-top:12px;">
      <span style="font-size:.95em;color:#fff5;">Streams: </span>
      <span id="streams">${data.twitch.twClips}</span>
    </div>
    <div style="margin-top:12px;">
      <span style="font-size:.95em;color:#fff5;">Abos: </span>
      <span id="twsubs">${data.twitch.twSubs}</span>
    </div>
  `;
}

/* --- Play-Buttons --- */
const playBtnTiers = [
  {subs:100000, name:'Silber'},
  {subs:1000000, name:'Gold'},
  {subs:10000000, name:'Diamant'}
];
function checkPlayBtn(){
  let cur = data.playBtns;
  for(let i=0;i<playBtnTiers.length;i++){
    if(data.subs>=playBtnTiers[i].subs && cur<=i){
      data.playBtns++;
      info(`Du hast den ${playBtnTiers[i].name}-Play-Button erhalten! +30% Boost`);
      document.getElementById('playbtnstats').style.display='';
      save(); updateAll();
    }
  }
}

/* --- Game Loops --- */
function mainLoop(){
  // Cutter: automatisch Video schneiden
  if(data.upgrades.cutter.level>0 && data.clips>=10 && !cutting){
    let num = Math.min(100, Math.floor(data.clips/10)*10);
    if(num>0){
      data.clips-=num; cutting=true; cutProgress=0; cutTitle="Auto-Video";
      renderCut(); save();
    }
  }
  // Schneiden tick
  if(cutting) cutTick();
  // Klicker: automatisch Clips generieren
  if(data.upgrades.clicker.level>0){
    data.clips+=clipsPerClick();
  }
  // Streamer: Twitch-Button automatisch
  if(data.twitch.unlocked && data.upgrades.streamer.level>0){
    data.twitch.twClips+=twitchPerClick();
  }
  // Twitch Subs
  if(data.twitch.unlocked){
    let gain = Math.floor(Math.random()*(data.twitch.twClips/20));
    if(gain>0){
      data.twitch.twSubs+=gain;
      data.subs+=gain; data.twitch.twClips=0;
    }
  }
  checkPlayBtn();
  updateAll();
}
setInterval(mainLoop,1000);

/* --- Update UI --- */
function updateBtnImgs(){
  document.getElementById('ytBtnImg').src=data.ytImg||ytLogo;
}
function updateStats(){
  document.getElementById('subs').textContent = data.subs;
  document.getElementById('clips').textContent = data.clips;
  document.getElementById('videos').textContent = data.videos.length;
  document.getElementById('clips-per-click').textContent = clipsPerClick();
  if(data.playBtns>0) {
    document.getElementById('playbtnstats').style.display='';
    document.getElementById('playbtns').textContent=data.playBtns;
  }
  else document.getElementById('playbtnstats').style.display='none';
  if(data.twitch.unlocked) document.getElementById('navtwitch').style.display='';
  else document.getElementById('navtwitch').style.display='none';
  document.getElementById('twitchUnlockMsg').innerHTML=(data.subs>=10000&&!data.twitch.unlocked)?
    '<b>Du hast Twitch freigeschaltet!</b> Jetzt im Menü verfügbar.' :'';
}
function updateAll(){
  updateStats(); renderVideos(); renderShop(); renderProfile();
  if(document.getElementById('twitch').classList.contains('visible')) renderTwitch();
}

/* --- Utility --- */
function escapeHTML(str){return str.replace(/[&<>"']/g,s=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[s]));}
function updateTwitch(){ renderTwitch(); save(); }

/* --- On Page Load --- */
window.onload=function(){
  let last = localStorage.getItem('ytclicker_last');
  if(last) load(last); else {
    showMenu('profile');
    info("Bitte richte deinen Kanal ein!");
  }
  updateBtnImgs();
  setInterval(()=>{if(document.getElementById('cut').classList.contains('visible')) renderCut();},400);
};
</script>
</body>
</html>
