<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Youtube Clicker</title>
  <link rel="icon" href="https://www.youtube.com/s/desktop/dfd0b8f9/img/favicon_96x96.png">
  <style>
    :root {
      --main: #ff0000;
      --yt: #ff0000;
      --tw: #9146ff;
      --bg: #181818;
      --card: #232323;
      --accent: #fff;
      --btn: #fff;
      --btn-txt: #111;
      --shadow: 0 6px 32px rgba(0,0,0,0.30);
      --radius: 1.6rem;
    }
    * { box-sizing: border-box; }
    html,body {
      font-family: 'Segoe UI', Arial, sans-serif;
      color: var(--accent);
      background: var(--bg);
      margin: 0; padding: 0;
      min-height: 100vh;
      user-select: none;
      -webkit-user-select: none;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    #main-container {
      width: 100%;
      max-width: 480px;
      margin-top: 1.5rem;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 2rem 1rem 2rem 1rem;
      min-height: 70vh;
    }
    .menu {
      display: none;
    }
    .menu.active {
      display: block;
      animation: fadein 0.2s;
    }
    @keyframes fadein {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .center {
      text-align: center;
      margin-bottom: 1.5rem;
    }
    .big-btn {
      width: 170px;
      height: 170px;
      border-radius: 50%;
      border: 5px solid #fff;
      background: var(--yt);
      box-shadow: 0 10px 40px rgba(0,0,0,0.40),0 2px 8px #0006;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 3rem auto 1.5rem auto;
      cursor: pointer;
      transition: transform 0.1s;
      position: relative;
      overflow: hidden;
    }
    .big-btn.twitch {
      background: var(--tw);
      border-color: #fff;
    }
    .big-btn img {
      width: 80px;
      height: 80px;
      object-fit: cover;
      border-radius: 50%;
      border: 3px solid #fff;
      background: #fff;
      display: block;
    }
    .stat-bar {
      display: flex;
      justify-content: space-between;
      margin: 1rem 0 0.5rem 0;
      font-size: 1.1rem;
    }
    .stat-bar span {
      flex: 1 1 0;
      min-width: 0;
      text-align: center;
      margin: 0 0.2rem;
      background: #222;
      padding: 0.4em 0.4em;
      border-radius: 1em;
    }
    .main-btns {
      display: flex;
      justify-content: center;
      gap: 0.7rem;
      margin: 1rem 0 0 0;
    }
    .main-btns button, .nav-btn, .shop-btn, .cut-btn {
      padding: 0.7em 1.4em;
      border: none;
      border-radius: var(--radius);
      background: var(--main);
      color: #fff;
      font-size: 1.05rem;
      font-weight: 600;
      cursor: pointer;
      margin: 0.2rem;
      box-shadow: 0 2px 8px #0003;
      transition: background 0.18s;
    }
    .main-btns button:active, .shop-btn:active, .cut-btn:active {
      background: #c00;
    }
    .nav-bar {
      display: flex;
      justify-content: space-around;
      width: 100%;
      position: fixed;
      left: 0; right: 0; bottom: 0;
      background: var(--card);
      padding: 1em 0.2em;
      z-index: 10;
      border-top: 1.5px solid #222;
    }
    .nav-btn {
      background: #fff3;
      color: #fff;
      border: none;
      border-radius: 1em;
      font-size: 1.15rem;
      padding: 0.7em 1.2em;
      font-weight: 500;
      letter-spacing: 0.03em;
      margin: 0 0.1em;
      cursor: pointer;
      transition: background 0.18s;
    }
    .nav-btn.active {
      background: var(--main);
      color: #fff;
    }
    .shop-list {
      margin: 2.3rem 0 0 0;
      padding: 0;
    }
    .shop-item {
      background: #221f1f;
      border-radius: 1em;
      box-shadow: 0 2px 8px #0002;
      padding: 1.2em 1em;
      margin-bottom: 1.3em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.8em;
    }
    .shop-info {
      flex: 1 1 auto;
    }
    .shop-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.3em;
    }
    .shop-desc {
      font-size: 0.96rem;
      opacity: 0.8;
    }
    .shop-btn {
      padding: 0.5em 1.1em;
      font-size: 1rem;
      background: var(--main);
      color: #fff;
    }
    .cut-menu-box {
      margin: 2rem auto 0 auto;
      max-width: 320px;
      background: #222;
      border-radius: 1.2em;
      padding: 1.3em 1em;
      box-shadow: var(--shadow);
      text-align: center;
    }
    .cut-btn {
      margin-top: 1.1em;
      background: var(--main);
      color: #fff;
      width: 100%;
    }
    .progressbar {
      width: 100%;
      background: #444;
      border-radius: 1em;
      margin: 1.2em 0 0.6em 0;
      height: 18px;
      position: relative;
      overflow: hidden;
    }
    .progressbar-inner {
      background: var(--main);
      height: 100%;
      width: 0%;
      border-radius: 1em;
      transition: width 0.2s;
    }
    .video-list {
      margin: 2em 0 0 0;
    }
    .video-item {
      background: #232323;
      border-radius: 0.8em;
      padding: 0.7em 1em;
      margin-bottom: 0.9em;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .video-title {
      font-weight: 600;
      font-size: 1.01rem;
    }
    .profile-img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      background: #fff;
      border: 2px solid #fff;
    }
    .profile-block {
      text-align: center;
      margin: 2em auto 1em auto;
    }
    .profile-info {
      font-size: 1.07rem;
      margin-top: 1.1em;
    }
    .profile-code {
      font-size: 1.1rem;
      background: #111;
      padding: 0.7em 1.1em;
      border-radius: 1em;
      margin: 1.2em auto 0 auto;
      word-break: break-all;
    }
    .profile-btns {
      margin-top: 1.2em;
    }
    .profile-btns button {
      margin: 0 0.2em;
      font-size: 1rem;
      background: #222;
      color: #fff;
    }
    .input-group {
      margin: 1.3em 0 0.4em 0;
    }
    .input-label {
      display: block;
      font-size: 1.07rem;
      margin-bottom: 0.4em;
    }
    .input {
      width: 85%;
      padding: 0.5em 1em;
      border-radius: 1em;
      border: 1.5px solid #aaa;
      font-size: 1.13rem;
      margin-bottom: 1em;
      background: #292929;
      color: #fff;
    }
    .play-btn-bar {
      margin: 2em 0 0 0;
      display: flex;
      gap: 0.4em;
      justify-content: center;
    }
    .play-btn {
      background: gold;
      color: #111;
      border-radius: 0.7em;
      padding: 0.35em 0.7em;
      font-weight: bold;
      font-size: 1.1em;
      border: 2px solid #fff;
      box-shadow: 0 2px 8px #0003;
      margin: 0 0.15em;
    }
    .hide {display:none !important;}
    @media (max-width: 600px) {
      #main-container {max-width: 98vw;}
      .big-btn {width: 125px; height: 125px;}
      .nav-bar {font-size: 1rem;}
    }
  </style>
</head>
<body>
  <div id="main-container">
    <!-- MENUS -->
    <div id="menu-initial" class="menu active">
      <div class="center">
        <h2>Willkommen beim Youtube Clicker!</h2>
        <div class="input-group">
          <label class="input-label" for="ytname">Kanalname:</label>
          <input class="input" id="ytname" maxlength="18" placeholder="Dein Kanalname...">
        </div>
        <div class="input-group">
          <label class="input-label" for="ytimg">Profilbild (optional):</label>
          <input type="file" id="ytimg" accept="image/*">
        </div>
        <button class="main-btns" id="start-btn">Starten</button>
      </div>
    </div>
    <div id="menu-main" class="menu">
      <div class="center">
        <div class="stat-bar">
          <span title="Klicks">üé¨ <span id="stat-clips">0</span></span>
          <span title="Abonnenten">üë• <span id="stat-abos">0</span></span>
        </div>
        <div class="stat-bar">
          <span title="Videos">üìπ <span id="stat-videos">0</span></span>
          <span title="Play-Buttons">‚ñ∂Ô∏è <span id="stat-playbuttons">0</span></span>
        </div>
        <div id="yt-btn" class="big-btn">
          <img id="yt-btn-img" src="https://www.youtube.com/s/desktop/dfd0b8f9/img/favicon_96x96.png" alt="Profilbild">
        </div>
        <div class="main-btns">
          <button id="to-cutmenu">Clips schneiden</button>
          <button id="to-shop">Shop</button>
          <button id="to-profile">Profil</button>
        </div>
        <div class="play-btn-bar" id="play-btn-bar"></div>
      </div>
      <div class="video-list" id="video-list"></div>
    </div>
    <div id="menu-cut" class="menu">
      <div class="cut-menu-box">
        <h3>Video schneiden</h3>
        <div>
          <div>Clips verf√ºgbar: <b id="cut-clip-count">0</b></div>
          <div>
            <label>Clips f√ºr Video:&nbsp;
              <input id="clips-per-video" type="number" min="1" max="1000" step="1" value="10" style="width:70px;">
            </label>
          </div>
        </div>
        <div class="progressbar"><div class="progressbar-inner" id="cut-progress"></div></div>
        <input class="input" id="cut-title" maxlength="23" placeholder="Videotitel...">
        <button class="cut-btn" id="start-cut">Schneiden & Hochladen</button>
        <button class="cut-btn" id="back-main1" style="background:#222;">Zur√ºck</button>
      </div>
    </div>
    <div id="menu-shop" class="menu">
      <h3 class="center">Shop</h3>
      <div class="shop-list" id="shop-list"></div>
      <button class="cut-btn" id="back-main2" style="background:#222;">Zur√ºck</button>
    </div>
    <div id="menu-profile" class="menu">
      <div class="profile-block">
        <label>
          <img id="profile-img" class="profile-img" src="https://www.youtube.com/s/desktop/dfd0b8f9/img/favicon_96x96.png">
          <input type="file" id="profile-img-upload" accept="image/*" style="display:none;">
        </label>
        <div class="profile-info">
          <div><b>Kanal:</b> <span id="profile-name"></span></div>
          <div><b>Twitch:</b> <span id="profile-twitch-name"></span></div>
          <div>
            <label>Twitch-Kanalname:
              <input class="input" id="twitch-name-input" maxlength="18" placeholder="Twitchname...">
            </label>
          </div>
          <div>
            <label>Twitch-Profilbild:
              <input type="file" id="twitch-img-upload" accept="image/*">
            </label>
          </div>
        </div>
        <div class="profile-code">
          <div>Account Code:</div>
          <code id="profile-code"></code>
        </div>
        <div class="profile-btns">
          <button id="profile-save">Speichern</button>
          <button id="profile-import">Code einf√ºgen</button>
          <button id="back-main3">Zur√ºck</button>
        </div>
      </div>
    </div>
    <div id="menu-twitch" class="menu">
      <div class="center">
        <div class="stat-bar">
          <span title="Twitch-Abonnenten">üë• <span id="stat-twitch-abos">0</span></span>
        </div>
        <div class="big-btn twitch" id="tw-btn">
          <img id="tw-btn-img" src="https://static.twitchcdn.net/assets/favicon-32-e29e246c157142c94346.png" alt="Twitch Profil">
        </div>
        <div class="main-btns">
          <button id="back-main4">Zur√ºck</button>
        </div>
      </div>
    </div>
  </div>
  <div class="nav-bar">
    <button class="nav-btn active" data-menu="menu-main">Home</button>
    <button class="nav-btn" data-menu="menu-shop">Shop</button>
    <button class="nav-btn" data-menu="menu-cut">Cut</button>
    <button class="nav-btn" data-menu="menu-profile">Profil</button>
    <button class="nav-btn hide" data-menu="menu-twitch" id="nav-twitch">Twitch</button>
  </div>

  <script>
    // --- GAME STATE & CONSTANTS ---
    const ABOS_FOR_TWITCH_MENU = 10000;
    const PLAYBUTTON_THRESHOLDS = [
      {name:'Silver', abos: 100000, color:'silver'},
      {name:'Gold', abos: 1000000, color:'gold'},
      {name:'Diamond', abos: 10000000, color:'#b9f2ff'}
    ];
    const SHOP_ITEMS = [
      {
        key: 'cutter',
        name: 'Cutter',
        desc: 'Schneidet Videos automatisch. Mehr Upgrades = schneller.',
        basePrice: 500, growth: 1.8,
        icon: '‚úÇÔ∏è'
      },
      {
        key: 'klicker',
        name: 'Klicker',
        desc: 'Klickt automatisch f√ºr Clips. Mehr Upgrades = mehr Klicks/sec.',
        basePrice: 100, growth: 1.6,
        icon: 'ü§ñ'
      },
      {
        key: 'streamer',
        name: 'Streamer',
        desc: 'Klickt automatisch Twitch-Button. Mehr Upgrades = mehr Klicks/sec.',
        basePrice: 2000, growth: 1.7,
        icon: 'üé•'
      },
      {
        key: 'manager',
        name: 'Manager',
        desc: 'Boostet ALLE um +5% Speed pro Upgrade.',
        basePrice: 10000, growth: 2.1,
        icon: 'üëî'
      }
    ];
    let state = {
      ytName: '',
      ytImg: '',
      twitchName: '',
      twitchImg: '',
      clips: 0,
      abos: 0,
      twitchAbos: 0,
      videos: [],
      playbuttons: [],
      upgrades: {
        cutter: 0,
        klicker: 0,
        streamer: 0,
        manager: 0
      }
    };
    let cutInProgress = false;
    let twitchUnlocked = false;

    // --- UTILITIES ---
    function saveState() {
      localStorage.setItem('ytclicker-save', JSON.stringify(state));
    }
    function loadState() {
      let str = localStorage.getItem('ytclicker-save');
      if(str) {
        try { state = JSON.parse(str); } catch(e){}
      }
    }
    function exportCode() {
      return btoa(unescape(encodeURIComponent(JSON.stringify(state))));
    }
    function importCode(code) {
      try {
        let s = JSON.parse(decodeURIComponent(escape(atob(code.trim()))));
        if(s && typeof s === 'object') {
          state = s;
          saveState();
          renderAll();
          alert('Account geladen!');
        }
      } catch(e) { alert('Ung√ºltiger Code!'); }
    }
    function formatNum(n) {
      if (n>=1e9) return (n/1e9).toFixed(2)+'B';
      if (n>=1e6) return (n/1e6).toFixed(2)+'M';
      if (n>=1e3) return (n/1e3).toFixed(1)+'k';
      return n;
    }

    // --- RENDERING ---
    function renderAll() {
      // Main stats
      document.getElementById('stat-clips').textContent = formatNum(state.clips);
      document.getElementById('stat-abos').textContent = formatNum(state.abos);
      document.getElementById('stat-videos').textContent = state.videos.length;
      document.getElementById('stat-playbuttons').textContent = state.playbuttons.length;
      // Youtube Button Img
      let img = state.ytImg || "https://www.youtube.com/s/desktop/dfd0b8f9/img/favicon_96x96.png";
      document.getElementById('yt-btn-img').src = img;
      document.getElementById('profile-img').src = img;
      document.getElementById('profile-name').textContent = state.ytName || 'Kein Name';
      document.getElementById('clips-per-video').max = Math.max(1, state.clips);
      // Playbuttons
      let pbbar = document.getElementById('play-btn-bar');
      pbbar.innerHTML = '';
      for(let pb of state.playbuttons) {
        pbbar.innerHTML += `<span class="play-btn" style="background:${pb.color};">${pb.name} Playbutton</span>`;
      }
      // Video List
      let vlist = document.getElementById('video-list');
      vlist.innerHTML = state.videos.slice(-5).reverse().map(v=>(
        `<div class="video-item"><span class="video-title">${v.title}</span><span>+${formatNum(v.abos)} üë•</span></div>`
      )).join('');
      // Twitch
      if(state.abos>=ABOS_FOR_TWITCH_MENU) {
        document.getElementById('nav-twitch').classList.remove('hide');
        twitchUnlocked=true;
      } else {
        document.getElementById('nav-twitch').classList.add('hide');
        twitchUnlocked=false;
      }
      // Twitch Button Img
      let ti = state.twitchImg || "https://static.twitchcdn.net/assets/favicon-32-e29e246c157142c94346.png";
      document.getElementById('tw-btn-img').src = ti;
      document.getElementById('profile-twitch-name').textContent = state.twitchName||'Kein Name';
      document.getElementById('stat-twitch-abos').textContent = formatNum(state.twitchAbos||0);
      // Profile
      document.getElementById('profile-code').textContent = exportCode();
    }
    // --- MENUS ---
    function showMenu(id) {
      for(let el of document.getElementsByClassName('menu')) el.classList.remove('active');
      document.getElementById(id).classList.add('active');
      // Active Nav
      for(let b of document.getElementsByClassName('nav-btn')) b.classList.remove('active');
      let nav = [...document.getElementsByClassName('nav-btn')].find(b=>b.dataset.menu===id);
      if(nav) nav.classList.add('active');
    }
    // --- MAIN BUTTONS ---
    document.getElementById('start-btn').onclick = () => {
      let name = document.getElementById('ytname').value.trim();
      if(!name) return alert('Bitte Kanalnamen eingeben!');
      state.ytName = name;
      let f = document.getElementById('ytimg').files[0];
      if(f) {
        let reader = new FileReader();
        reader.onload = e => {
          state.ytImg = e.target.result;
          saveState(); showMenu('menu-main'); renderAll();
        }; reader.readAsDataURL(f);
      } else {
        showMenu('menu-main'); saveState(); renderAll();
      }
    };
    document.getElementById('yt-btn').onclick = () => {
      let clickValue = 1 * playbuttonBoost();
      state.clips += clickValue;
      saveState();
      renderAll();
    };
    document.getElementById('tw-btn').onclick = () => {
      if(!twitchUnlocked) return;
      let twitchValue = twitchClickValue();
      state.twitchAbos = (state.twitchAbos||0) + twitchValue;
      saveState();
      renderAll();
    };
    function playbuttonBoost() {
      return 1 + 0.3*state.playbuttons.length;
    }
    function twitchClickValue() {
      let base = 3 + (state.upgrades.streamer||0)*2;
      return Math.round(base * playbuttonBoost());
    }
    // --- CUT MENU ---
    document.getElementById('to-cutmenu').onclick = ()=>{ showMenu('menu-cut'); renderCutMenu(); };
    document.getElementById('back-main1').onclick = ()=>{ showMenu('menu-main'); };
    function renderCutMenu() {
      document.getElementById('cut-clip-count').textContent = formatNum(state.clips);
      document.getElementById('cut-title').value = '';
      document.getElementById('cut-progress').style.width = "0%";
    }
    document.getElementById('start-cut').onclick = () => {
      if(cutInProgress) return;
      let needed = Math.max(1,parseInt(document.getElementById('clips-per-video').value));
      let title = document.getElementById('cut-title').value.trim() || 'Neues Video';
      if(state.clips<needed) return alert('Nicht genug Clips!');
      cutInProgress = true;
      let progress = 0;
      let cutTime = Math.max(1500, 4000 - state.upgrades.cutter*350 - state.upgrades.manager*200);
      let step = 100;
      let progressEl = document.getElementById('cut-progress');
      let interval = setInterval(()=>{
        progress += step;
        let percent = Math.min(100,progress/cutTime*100);
        progressEl.style.width = percent+'%';
        if(progress>=cutTime) {
          clearInterval(interval);
          state.clips -= needed;
          let abosGained = Math.round(Math.random()*500*(1+state.videos.length/8)*(1+state.upgrades.manager*0.05)*playbuttonBoost());
          state.abos += abosGained;
          state.videos.push({title,clips:needed,abos:abosGained,time:Date.now()});
          checkPlaybutton();
          saveState(); renderAll(); renderCutMenu();
          alert(`Video "${title}" hochgeladen!\n+${abosGained} Abonnenten.`);
          cutInProgress = false;
        }
      },step);
    };
    // --- SHOP ---
    document.getElementById('to-shop').onclick = ()=>{ showMenu('menu-shop'); renderShop(); };
    document.getElementById('back-main2').onclick = ()=>{ showMenu('menu-main'); };
    function renderShop() {
      let shopDiv = document.getElementById('shop-list');
      shopDiv.innerHTML = '';
      for(let item of SHOP_ITEMS) {
        let lvl = state.upgrades[item.key]||0;
        let price = Math.round(item.basePrice * Math.pow(item.growth, lvl));
        shopDiv.innerHTML += `<div class="shop-item">
          <div class="shop-info">
            <div class="shop-title">${item.icon} ${item.name} <span style="font-size:0.92em;font-weight:400;">Lv.${lvl}</span></div>
            <div class="shop-desc">${item.desc}</div>
          </div>
          <button class="shop-btn" onclick="buyUpgrade('${item.key}',${price})">${price} Clips</button>
        </div>`;
      }
    }
    window.buyUpgrade = function(key,price) {
      if(state.clips<price) return alert('Nicht genug Clips!');
      state.clips -= price;
      state.upgrades[key] = (state.upgrades[key]||0)+1;
      saveState(); renderAll(); renderShop();
    }
    // --- AUTO WORKERS ---
    setInterval(()=>{
      // Klicker: Clips/sec
      let cps = state.upgrades.klicker * (1+state.upgrades.manager*0.05) * playbuttonBoost();
      if(cps>0) { state.clips += Math.round(cps); }
      // Cutter: Video/sec
      if(state.upgrades.cutter>0) {
        if(!cutInProgress && state.clips>=10) {
          // Automatisch schneiden
          let cutTime = Math.max(2000, 6000 - state.upgrades.cutter*450 - state.upgrades.manager*200);
          cutInProgress = true;
          let title = 'Auto-Video '+(state.videos.length+1);
          setTimeout(()=>{
            state.clips -= 10;
            let abosGained = Math.round(Math.random()*250*(1+state.videos.length/18)*(1+state.upgrades.manager*0.05)*playbuttonBoost());
            state.abos += abosGained;
            state.videos.push({title,clips:10,abos:abosGained,time:Date.now()});
            checkPlaybutton();
            saveState(); renderAll();
            cutInProgress = false;
          },cutTime);
        }
      }
      // Streamer: Twitch-Clicks/sec
      let tps = state.upgrades.streamer * (1+state.upgrades.manager*0.05) * playbuttonBoost();
      if(tps>0 && twitchUnlocked) {
        state.twitchAbos = (state.twitchAbos||0) + Math.round(tps);
      }
      saveState(); renderAll();
    }, 1200);
    // --- PLAYBUTTONS ---
    function checkPlaybutton() {
      for(let pb of PLAYBUTTON_THRESHOLDS) {
        if(state.abos>=pb.abos && !state.playbuttons.some(x=>x.name===pb.name)) {
          state.playbuttons.push(pb);
          alert(`Herzlichen Gl√ºckwunsch!\nDu hast den ${pb.name} Playbutton erhalten! (+30% Boost)`);
        }
      }
    }
    // --- PROFILE ---
    document.getElementById('to-profile').onclick = ()=>{ showMenu('menu-profile'); renderAll(); };
    document.getElementById('back-main3').onclick = ()=>{ showMenu('menu-main'); };
    document.getElementById('profile-img').onclick = ()=>{ document.getElementById('profile-img-upload').click(); };
    document.getElementById('profile-img-upload').onchange = function() {
      let f = this.files[0];
      if(f) {
        let reader = new FileReader();
        reader.onload = e => {
          state.ytImg = e.target.result;
          saveState(); renderAll();
        }; reader.readAsDataURL(f);
      }
    };
    document.getElementById('profile-save').onclick = ()=>{
      let tn = document.getElementById('twitch-name-input').value.trim();
      if(tn) state.twitchName = tn;
      saveState(); renderAll();
      alert('Profil gespeichert!');
    };
    document.getElementById('profile-import').onclick = ()=>{
      let code = prompt('Bitte Code einf√ºgen:');
      if(code) importCode(code);
    };
    document.getElementById('twitch-name-input').oninput = function() {
      state.twitchName = this.value.trim();
      saveState();
    };
    document.getElementById('twitch-img-upload').onchange = function() {
      let f = this.files[0];
      if(f) {
        let reader = new FileReader();
        reader.onload = e => {
          state.twitchImg = e.target.result;
          saveState(); renderAll();
        }; reader.readAsDataURL(f);
      }
    };
    // --- TWITCH MENU ---
    document.getElementById('nav-twitch').onclick = ()=>{ showMenu('menu-twitch'); renderAll(); };
    document.getElementById('back-main4').onclick = ()=>{ showMenu('menu-main'); };
    // --- NAVIGATION ---
    for(let b of document.getElementsByClassName('nav-btn')) {
      b.onclick = function(){
        let m = this.dataset.menu;
        showMenu(m); renderAll();
      }
    }
    // --- INIT ---
    window.onload = () => {
      loadState();
      if(state.ytName) showMenu('menu-main');
      renderAll();
    };
  </script>
</body>
</html>
